(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,a){e.exports=a(48)},46:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),s=a.n(o),c=a(5),i=a(6),u=a(8),l=a(7),d=a(9),m=a(3),h=a(50),p=a(51),v=a(29),b=a(13),O=a.n(b),j=a(33),f=a(4),w=a(2),E={sarahedo:{id:"sarahedo",name:"Sarah Edo",avatarURL:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Pok%C3%A9_Ball_icon.svg/601px-Pok%C3%A9_Ball_icon.svg.png",answers:{"8xf0y6ziyjabvozdd253nd":"optionOne","6ni6ok3ym7mf1p33lnez":"optionTwo",am8ehyc8byjqgar0jgpub9:"optionTwo",loxhs1bqm25b708cmbf3g:"optionTwo"},questions:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},tylermcginnis:{id:"tylermcginnis",name:"Tyler McGinnis",avatarURL:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR9HY_aSZ719--q64PG569KF9m2Ds13rWgQ4ap_0qvh7Tx41RIoFw",answers:{vthrdm985a262al8qx3do:"optionOne",xj352vofupe1dqz9emx13r:"optionTwo"},questions:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},johndoe:{id:"johndoe",name:"John Doe",avatarURL:"https://i0.wp.com/blog.udacity.com/wp-content/uploads/2016/02/U_360x360px.jpg",answers:{xj352vofupe1dqz9emx13r:"optionOne",vthrdm985a262al8qx3do:"optionTwo","6ni6ok3ym7mf1p33lnez":"optionTwo"},questions:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]}},y={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",author:"sarahedo",timestamp:1467166872634,optionOne:{votes:["sarahedo"],text:"have horrible short term memory"},optionTwo:{votes:[],text:"have horrible long term memory"}},"6ni6ok3ym7mf1p33lnez":{id:"6ni6ok3ym7mf1p33lnez",author:"johndoe",timestamp:1468479767190,optionOne:{votes:[],text:"become a superhero"},optionTwo:{votes:["johndoe","sarahedo"],text:"become a supervillain"}},am8ehyc8byjqgar0jgpub9:{id:"am8ehyc8byjqgar0jgpub9",author:"sarahedo",timestamp:1488579767190,optionOne:{votes:[],text:"be telekinetic"},optionTwo:{votes:["sarahedo"],text:"be telepathic"}},loxhs1bqm25b708cmbf3g:{id:"loxhs1bqm25b708cmbf3g",author:"tylermcginnis",timestamp:1482579767190,optionOne:{votes:[],text:"be a front-end developer"},optionTwo:{votes:["sarahedo"],text:"be a back-end developer"}},vthrdm985a262al8qx3do:{id:"vthrdm985a262al8qx3do",author:"tylermcginnis",timestamp:1489579767190,optionOne:{votes:["tylermcginnis"],text:"find $50 yourself"},optionTwo:{votes:["johndoe"],text:"have your best friend find $500"}},xj352vofupe1dqz9emx13r:{id:"xj352vofupe1dqz9emx13r",author:"johndoe",timestamp:1493579767190,optionOne:{votes:["johndoe"],text:"write JavaScript"},optionTwo:{votes:["tylermcginnis"],text:"write Swift"}}};function g(e){var t=e.optionOneText,a=e.optionTwoText,n=e.author;return{id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),timestamp:Date.now(),author:n,optionOne:{votes:[],text:t},optionTwo:{votes:[],text:a}}}function q(){return Promise.all([new Promise(function(e,t){setTimeout(function(){return e(Object(w.a)({},E))},1e3)}),new Promise(function(e,t){setTimeout(function(){return e(Object(w.a)({},y))},1e3)})]).then(function(e){var t=Object(j.a)(e,2);return{users:t[0],questions:t[1]}})}function k(e){return t=e,new Promise(function(e,a){var n=t.author,r=g(t);setTimeout(function(){y=Object(w.a)({},y,Object(f.a)({},r.id,r)),E=Object(w.a)({},E,Object(f.a)({},n,Object(w.a)({},E[n],{questions:E[n].questions.concat([r.id])}))),e(r)},1e3)});var t}function x(e){return function(e){var t=e.authedUser,a=e.qid,n=e.answer;return new Promise(function(e,r){Math.random()<.2?r('save to "database" failed'):setTimeout(function(){E=Object(w.a)({},E,Object(f.a)({},t,Object(w.a)({},E[t],{answers:Object(w.a)({},E[t].answers,Object(f.a)({},a,n))}))),y=Object(w.a)({},y,Object(f.a)({},a,Object(w.a)({},y[a],Object(f.a)({},n,Object(w.a)({},y[a][n],{votes:y[a][n].votes.concat([t])}))))),e()},500)})}(e)}var N="RECEIVE_USERS";var U="RECEIVE_QUESTIONS",T="ADD_QUESTION",C="ANSWER_QUESTION",S="REMOVE_ANSWER_QUESTION";function A(e,t){return function(a,n){var r=n().authedUser;return a(Object(b.showLoading)()),k({author:r,optionOneText:e,optionTwoText:t}).then(function(e){return a(function(e){return{type:T,question:e}}(e))}).then(function(){return a(Object(b.hideLoading)())})}}function R(e,t){return function(a,n){var r=n().authedUser;return a(function(e,t,a){return{type:C,authedUser:e,qid:t,answer:a}}(r,e,t)),x({authedUser:r,qid:e,answer:t}).catch(function(n){console.warn("Error in handleAnswerQuestion: ",n),a(function(e,t,a){return{type:S,authedUser:e,qid:t,answer:a}}(r,e,t)),alert("There was an error answering the question.")})}}function z(){return function(e){return e(Object(b.showLoading)()),q().then(function(t){var a=t.users,n=t.questions;e(function(e){return{type:N,users:e}}(a)),e(function(e){return{type:U,questions:e}}(n)),e(Object(b.hideLoading)())})}}var _=a(28);function D(e,t){var a=e-t;return a<6e4?Math.round(a/1e3)+" seconds ago":a<36e5?Math.round(a/6e4)+" minutes ago":a<864e5?Math.round(a/36e5)+" hours ago":a<2592e6?Math.round(a/864e5)+" days ago":a<31536e6?Math.round(a/2592e6)+" months ago":Math.round(a/31536e6)+" years ago"}var I=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.question,a=e.user,n=e.wasAskedByYou;return r.a.createElement(_.a,{to:"".concat("/reactnd-would-you-rather","/questions/").concat(t.id)},r.a.createElement("div",{className:"question-summary"},r.a.createElement("img",{src:a.avatarURL,alt:"asker avatar"}),r.a.createElement("div",{className:"summary"},r.a.createElement("div",{className:"timestamp"},D(Date.now(),t.timestamp)),r.a.createElement("div",{className:"asked"},n?"you":t.author," asked..."))))}}]),t}(n.Component);var L=Object(m.connect)(function(e,t){var a=e.authedUser,n=e.users,r=e.questions,o=t.id,s=r[o];return{id:o,question:s,user:n[s.author],wasAskedByYou:a===s.author}})(I),M=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={showAnswered:!1},a.handleChange=function(e){a.setState({showAnswered:"answered"===e.target.id})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.authedUser,a=e.questionIds,n=this.state.showAnswered,o=t.answers;return r.a.createElement("div",null,r.a.createElement("h3",null,"Would You Rather Questions"),r.a.createElement("input",{type:"radio",name:"questions",id:"unanswered",checked:!n,onChange:this.handleChange}),r.a.createElement("label",null,"Unanswered"),r.a.createElement("input",{type:"radio",name:"questions",id:"answered",checked:n,onChange:this.handleChange}),r.a.createElement("label",null,"Answered"),r.a.createElement("ul",{className:"dashboard"},a.map(function(e){return Object.keys(o).includes(e)===n?r.a.createElement("li",{key:e},r.a.createElement(L,{id:e})):null})))}}]),t}(n.Component);var P=Object(m.connect)(function(e){var t=e.authedUser,a=e.users,n=e.questions;return{authedUser:a[t],questionIds:Object.keys(n).sort(function(e,t){return n[t].timestamp-n[e].timestamp})}})(M),Q=a(49);function B(){return r.a.createElement("nav",{className:"nav"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(Q.a,{to:"".concat("/reactnd-would-you-rather","/"),exact:!0,activeClassName:"active"},"Home")),r.a.createElement("li",null,r.a.createElement(Q.a,{to:"".concat("/reactnd-would-you-rather","/new"),activeClassName:"active"},"New Question")),r.a.createElement("li",null,r.a.createElement(Q.a,{to:"".concat("/reactnd-would-you-rather","/leaderboard"),activeClassName:"active"},"Leaderboard"))))}var Y=a(52),W=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={optionOne:"",optionTwo:""},a.handleChange=function(e,t){e.preventDefault(),a.setState(Object(f.a)({},t,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.optionOne,r=t.optionTwo;a.props.dispatch(A(n,r)),a.setState({optionOne:"",optionTwo:""}),a.props.history.push("/")},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.optionOne,n=t.optionTwo;return r.a.createElement("div",{className:"new-question"},r.a.createElement("form",null,r.a.createElement("div",{className:"title"},"Would You Rather"),r.a.createElement("input",{placeholder:"Option 1",value:a,onChange:function(t){return e.handleChange(t,"optionOne")}}),r.a.createElement("div",{className:"or"},"or"),r.a.createElement("input",{placeholder:"Option 2",value:n,onChange:function(t){return e.handleChange(t,"optionTwo")}}),r.a.createElement("br",null),r.a.createElement("button",{className:"submit",onClick:this.handleSubmit},"Submit")))}}]),t}(n.Component),F=Object(Y.a)(Object(m.connect)()(W)),H="SET_AUTHED_USER";function J(e){return{type:H,id:e}}var V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){a.props.dispatch(J(e.target.value))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Please sign in to continue"),r.a.createElement("select",{defaultValue:"Select a user",onChange:this.handleChange},r.a.createElement("option",{disabled:!0},"Select a user"),this.props.userIds.map(function(e){return r.a.createElement("option",{key:e},e)})))}}]),t}(n.Component);var G=Object(m.connect)(function(e){var t=e.users;return{userIds:Object.keys(t)}})(V),$=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){a.props.dispatch(J(""))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.authedUser;return r.a.createElement("div",{className:"authed-user"},r.a.createElement("img",{src:e.avatarURL,alt:"user avatar"}),r.a.createElement("div",null,"Hello, ".concat(e.name)),r.a.createElement("div",{className:"sign-out",onClick:this.handleClick},"Sign Out"))}}]),t}(n.Component);var K=Object(m.connect)(function(e){var t=e.authedUser;return{authedUser:e.users[t]}})($),Z=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.authedUser,a=e.question,n=t.answers[a.id],o=a.optionOne.votes.length,s=a.optionTwo.votes.length,c=o+s;return r.a.createElement("div",null,r.a.createElement("div",{className:"title"},"Would You Rather"),r.a.createElement("div",{className:"answer"},r.a.createElement("div",null,a.optionOne.text,"optionOne"===n&&r.a.createElement("span",{className:"answer-tag"}," your answer")),r.a.createElement("div",{className:"stats"},r.a.createElement("div",{className:"user-count"},o," out of ",c," users"),r.a.createElement("div",{className:"percentage"},(o/c*100).toFixed(1),"%"))),r.a.createElement("div",{className:"answer"},r.a.createElement("div",null,a.optionTwo.text,"optionTwo"===n&&r.a.createElement("span",{className:"answer-tag"}," your answer")),r.a.createElement("div",{className:"stats"},r.a.createElement("div",{className:"user-count"},s," out of ",c," users"),r.a.createElement("div",{className:"percentage"},(s/c*100).toFixed(1),"%"))))}}]),t}(n.Component);var X=Object(m.connect)(function(e,t){var a=e.authedUser,n=e.questions,r=e.users,o=t.qid,s=n[o];return{qid:o,authedUser:r[a],question:s}})(Z),ee=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={option:null},a.handleChange=function(e){a.setState({option:e.target.id})},a.handleClick=function(e){e.preventDefault();var t=a.state.option,n=a.props;(0,n.dispatch)(R(n.qid,t))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.question,t=this.state.option;return r.a.createElement("form",{className:"unanswered"},r.a.createElement("div",{className:"title"},"Would You Rather"),r.a.createElement("div",{className:"option"},r.a.createElement("input",{type:"radio",id:"optionOne",name:"rather",checked:"optionOne"===t,onChange:this.handleChange}),r.a.createElement("label",null,e.optionOne.text)),r.a.createElement("div",{className:"option"},r.a.createElement("input",{type:"radio",id:"optionTwo",name:"rather",checked:"optionTwo"===t,onChange:this.handleChange}),r.a.createElement("label",null,e.optionTwo.text)),r.a.createElement("button",{className:"submit",onClick:this.handleClick},"Submit"))}}]),t}(n.Component);var te=Object(m.connect)(function(e,t){var a=e.authedUser,n=e.users,r=e.questions,o=t.qid;return{qid:o,authedUser:n[a],question:r[o]}})(ee),ae=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.authedUser,a=e.question,n=e.questionUser,o=e.wasAskedByYou,s=t.answers[a.id];return r.a.createElement("div",{className:"question-page"},r.a.createElement("div",{className:"question-page-summary"},r.a.createElement("img",{src:n.avatarURL,alt:"asker avatar"}),r.a.createElement("div",{className:"summary"},r.a.createElement("div",{className:"timestamp"},D(Date.now(),a.timestamp)),r.a.createElement("div",{className:"asked"},o?"you":a.author," asked..."))),s?r.a.createElement(X,{qid:a.id}):r.a.createElement(te,{qid:a.id}))}}]),t}(n.Component);var ne=Object(m.connect)(function(e,t){var a=e.authedUser,n=e.questions,r=e.users,o=n[t.match.params.id],s=a===o.author;return{authedUser:r[a],question:o,questionUser:r[o.author],wasAskedByYou:s}})(ae),re=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("ul",{className:"leader"},r.a.createElement("li",{className:"leader-header leader-row"},r.a.createElement("div",{className:"fake-img"}),r.a.createElement("div",null,"Name"),r.a.createElement("div",null,"Questions Asked"),r.a.createElement("div",null,"Questions Answered")),this.props.users.map(function(e){return r.a.createElement("li",{className:"leader-row",key:e.id},r.a.createElement("div",null,r.a.createElement("img",{src:e.avatarURL,alt:"leader avatar"})),r.a.createElement("div",null,e.name),r.a.createElement("div",null,e.questions&&e.questions.length),r.a.createElement("div",null,e.answers&&Object.keys(e.answers).length))}))}}]),t}(n.Component);function oe(e,t){var a=e.questions?e.questions.length:0,n=e.answers?Object.keys(e.answers).length:0;return(t.questions?t.questions.length:0)+(t.answers?Object.keys(t.answers).length:0)-(a+n)}var se=Object(m.connect)(function(e){var t=e.users,a=Object.keys(t).map(function(e){return t[e]});return{users:a=a.sort(oe)}})(re),ce=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(z())}},{key:"render",value:function(){return this.props.authedUser?r.a.createElement(h.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(O.a,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"top-bar"},r.a.createElement(B,null),r.a.createElement(K,null)),r.a.createElement(p.a,null,r.a.createElement(v.a,{exact:!0,path:"".concat("/reactnd-would-you-rather","/"),component:P}),r.a.createElement(v.a,{exact:!0,path:"".concat("/reactnd-would-you-rather","/questions/:id"),component:ne}),r.a.createElement(v.a,{exact:!0,path:"".concat("/reactnd-would-you-rather","/new"),component:F}),r.a.createElement(v.a,{exact:!0,path:"".concat("/reactnd-would-you-rather","/leaderboard"),component:se}),r.a.createElement(v.a,{render:function(){return r.a.createElement("div",null,r.a.createElement("h3",null,"Sorry, that page doesn't exist"))}}))))):r.a.createElement(G,null)}}]),t}(n.Component);var ie=Object(m.connect)(function(e){return{authedUser:e.authedUser}})(ce),ue=a(14);var le=Object(ue.c)({authedUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return t.id;default:return e}},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(w.a)({},e,t.questions);case T:return Object(w.a)({},e,Object(f.a)({},t.question.id,t.question));case C:var a=e[t.qid],n=a[t.answer];return Object(w.a)({},e,Object(f.a)({},t.qid,Object(w.a)({},a,Object(f.a)({},t.answer,Object(w.a)({},n,{votes:n.votes?n.votes.concat([t.authedUser]):[t.authedUser]})))));case S:var r=e[t.qid],o=r[t.answer];return Object(w.a)({},e,Object(f.a)({},t.qid,Object(w.a)({},r,Object(f.a)({},t.answer,Object(w.a)({},o,{votes:o.votes.filter(function(e){return e!==t.authedUser})})))));default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(w.a)({},e,t.users);case C:var a=e[t.authedUser];return Object(w.a)({},e,Object(f.a)({},a.id,Object(w.a)({},a,{answers:Object(w.a)({},a.answers,Object(f.a)({},t.qid,t.answer))})));case S:var n=e[t.authedUser],r=Object.keys(n.answers).filter(function(e){return e!==t.qid}).reduce(function(e,t){return e[t]=n.answers[t],e},{});return Object(w.a)({},e,Object(f.a)({},n.id,Object(w.a)({},n,{answers:r})));case T:var o=e[t.question.author],s=e[o.id].questions;return Object(w.a)({},e,Object(f.a)({},o.id,Object(w.a)({},o,{questions:s?s.concat([t.question.id]):[t.question.id]})));default:return e}},loadingBar:b.loadingBarReducer}),de=function(e){return function(t){return function(a){console.group(a.type),console.log("The action: ",a);var n=t(a);return console.log("The new state: ",e.getState()),console.groupEnd(),n}}},me=a(32),he=Object(ue.a)(me.a,de),pe=(a(46),Object(ue.d)(le,he));s.a.render(r.a.createElement(m.Provider,{store:pe},r.a.createElement(ie,null)),document.getElementById("root"))}},[[34,2,1]]]);
//# sourceMappingURL=main.08c8f9db.chunk.js.map